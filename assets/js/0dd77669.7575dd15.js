(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{70:function(e,t,i){"use strict";i.r(t),i.d(t,"frontMatter",(function(){return b})),i.d(t,"metadata",(function(){return l})),i.d(t,"toc",(function(){return s})),i.d(t,"default",(function(){return u}));var a=i(3),r=i(7),n=(i(0),i(209)),c=i(210),p=i(211),o=i(212),b=(i(56),{id:"power-bi-service",title:"Power BI Service Principal Configuration"}),l={unversionedId:"admin-guide/getting-started/prerequisite/bi-platform-config/power-bi-service",id:"admin-guide/getting-started/prerequisite/bi-platform-config/power-bi-service",isDocsHomePage:!1,title:"Power BI Service Principal Configuration",description:"\x3c!--",source:"@site/docs/admin-guide/getting-started/prerequisite/bi-platform-config/power-bi-service.mdx",sourceDirName:"admin-guide/getting-started/prerequisite/bi-platform-config",slug:"/admin-guide/getting-started/prerequisite/bi-platform-config/power-bi-service",permalink:"/docs/admin-guide/getting-started/prerequisite/bi-platform-config/power-bi-service",version:"current",frontMatter:{id:"power-bi-service",title:"Power BI Service Principal Configuration"},sidebar:"adminGuide",previous:{title:"Power BI Admin Authentication Configuration",permalink:"/docs/admin-guide/getting-started/prerequisite/bi-platform-config/power-bi"},next:{title:"SSRS Platform Configuration",permalink:"/docs/admin-guide/getting-started/prerequisite/bi-platform-config/ssrs"}},s=[{value:"Step 1: Set up the Application in Azure",id:"step-1-set-up-the-application-in-azure",children:[]},{value:"Step 2: Create the Application Secret",id:"step-2-create-the-application-secret",children:[]},{value:"Step 3: Add Application to a Security Group",id:"step-3-add-application-to-a-security-group",children:[]},{value:"Step 4: Enable service principal authentication in Power BI",id:"step-4-enable-service-principal-authentication-in-power-bi",children:[]},{value:"Step 5: Configure Permissions for the Application",id:"step-5-configure-permissions-for-the-application",children:[]}],m={toc:s};function u(e){var t=e.components,i=Object(r.a)(e,["components"]);return Object(n.b)("wrapper",Object(a.a)({},m,i,{components:t,mdxType:"MDXLayout"}),Object(n.b)("p",null,"This Service Principal is used to provide administration authentication for Power BI agents without admin oAuth credentials."),Object(n.b)("p",null,"System Admin must configure this Service in the platform. Once configured, the bihubadmin adds the service principal in the bi hub application (Refer the ",Object(n.b)(p.a,{to:Object(c.a)("docs/admin-guide/agent-manager/agent/service-principal"),mdxType:"Link"},"Service Principal Authentication")," section)."),Object(n.b)("p",null,"Configuring service principal involves the following steps:"),Object(n.b)("ol",null,Object(n.b)("li",{parentName:"ol"},"Set up the application in Azure"),Object(n.b)("li",{parentName:"ol"},"Create the application secret"),Object(n.b)("li",{parentName:"ol"},"Add application to a security group"),Object(n.b)("li",{parentName:"ol"},"Enable service principal authentication in Power BI"),Object(n.b)("li",{parentName:"ol"},"Configure Permissions for the Application")),Object(n.b)("h2",{id:"step-1-set-up-the-application-in-azure"},"Step 1: Set up the Application in Azure"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Open the Azure portal > ",Object(n.b)("a",{parentName:"p",href:"https://portal.azure.com"},"https://portal.azure.com"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Go to ",Object(n.b)("strong",{parentName:"p"},"Azure Active Directory > App registrations > New registration"),"."),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"Azure Application Registration",src:Object(c.a)("/doc-images/powerbi/azure-new-registration.png")})),Object(n.b)("p",null,"Azure new application registration"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Enter the following field values for the application:"),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Name"),": The display name for service principal."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Supported account types")," as ",Object(n.b)("strong",{parentName:"li"},"Accounts in this organizational directory only (Default Directory only - Single tenant)"),"."),Object(n.b)("li",{parentName:"ul"},Object(n.b)("strong",{parentName:"li"},"Redirect URI")," of the application. The port number that you enter here must be the same as the backend port for Power BI agent.")),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"Application Registration",src:Object(c.a)("/doc-images/powerbi/register-service-app.png")})),Object(n.b)("p",null,"Application Registration"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Select ",Object(n.b)("strong",{parentName:"p"},"Register"),"."),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"Application Registration",src:Object(c.a)("/doc-images/powerbi/service-registered.png")})),Object(n.b)("p",null,"Application Registration")))),Object(n.b)("blockquote",null,Object(n.b)("p",{parentName:"blockquote"},"Make a note of the ",Object(n.b)("strong",{parentName:"p"},"Application (client) ID, Object ID"),", and ",Object(n.b)("strong",{parentName:"p"},"Directory (tenant) ID"),".")),Object(n.b)("h2",{id:"step-2-create-the-application-secret"},"Step 2: Create the Application Secret"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Go to ",Object(n.b)("strong",{parentName:"p"},"Azure Portal > Azure Active Directory > App registrations"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Select ",Object(n.b)("strong",{parentName:"p"},"BI Hub - Service Principal"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"From the left navigational panel, select ",Object(n.b)("strong",{parentName:"p"},"Certificates & secrets"),"."),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"Client secret",src:Object(c.a)("/doc-images/powerbi/client-secret.png")})),Object(n.b)("p",null,"Generate Client Secret"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Select ",Object(n.b)("strong",{parentName:"p"},"New client secret"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Specify a ",Object(n.b)("strong",{parentName:"p"},"Description")," and ",Object(n.b)("strong",{parentName:"p"},"Expiry")," duration for client secret and select ",Object(n.b)("strong",{parentName:"p"},"Add"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"The Client secret is generated with a ",Object(n.b)("strong",{parentName:"p"},"Value")," and a ",Object(n.b)("strong",{parentName:"p"},"Secret ID"),"."),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"User Client secret",src:Object(c.a)("/doc-images/powerbi/service-principal-clientsecret.png")})),Object(n.b)("p",null,"User Client Secret added")))),Object(n.b)("div",{className:"admonition admonition-important alert alert--info"},Object(n.b)("div",{parentName:"div",className:"admonition-heading"},Object(n.b)("h5",{parentName:"div"},Object(n.b)("span",{parentName:"h5",className:"admonition-icon"},Object(n.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"important")),Object(n.b)("div",{parentName:"div",className:"admonition-content"},Object(n.b)("p",{parentName:"div"},"Save the client secret value. You will not be able to retrieve it after you perform another operation or leave this blade. If failed to note down the value, please repeat the step ",Object(n.b)("a",{parentName:"p",href:"#setup-the-application-in-azure"},"Set up the application in Azure")," to create a new key."))),Object(n.b)("h2",{id:"step-3-add-application-to-a-security-group"},"Step 3: Add Application to a Security Group"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"In the ",Object(n.b)("a",{parentName:"li",href:"https://aad.portal.azure.com/"},"Azure AD admin center"),", select ",Object(n.b)("strong",{parentName:"li"},"Azure Active Directory"),"."),Object(n.b)("li",{parentName:"ul"},"Select ",Object(n.b)("strong",{parentName:"li"},"Groups"),"."),Object(n.b)("li",{parentName:"ul"},"To create a new security group, select ",Object(n.b)("strong",{parentName:"li"},"New group"),". (Kindly ignore if you wish to use the existing security group).",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Add the service principal application that you created inside the security group obtained in the above step."))),Object(n.b)("li",{parentName:"ul"},"Select ",Object(n.b)("strong",{parentName:"li"},"Create"),".")),Object(n.b)("h2",{id:"step-4-enable-service-principal-authentication-in-power-bi"},"Step 4: Enable service principal authentication in Power BI"),Object(n.b)("p",null,"Administer the Power BI portal to configure the tenant settings for your application."),Object(n.b)("p",null,"Tenant settings are used to restrict capabilities and features to a limited set of users/groups."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},"Sign in to ",Object(n.b)("a",{parentName:"li",href:"https://app.powerbi.com/"},"Power BI")," using your admin account credentials."),Object(n.b)("li",{parentName:"ul"},"From the page header, select ",Object(n.b)("strong",{parentName:"li"},"... > Settings > Admin portal"),"."),Object(n.b)("li",{parentName:"ul"},"Select ",Object(n.b)("strong",{parentName:"li"},"Tenant Settings"),".",Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"Power BI Admin portal Menu",src:Object(c.a)("/doc-images/powerbi/powerbi-admin-portal.png")})),Object(n.b)("p",null,"Power BI Admin portal Menu"))),Object(n.b)("li",{parentName:"ul"},"Under ",Object(n.b)("strong",{parentName:"li"},"Developer settings"),", toggle on ",Object(n.b)("strong",{parentName:"li"},"Enabled")," for ",Object(n.b)("strong",{parentName:"li"},"Allow service principals to use Power BI APIs")," option."),Object(n.b)("li",{parentName:"ul"},"Under ",Object(n.b)("strong",{parentName:"li"},"Apply to")," section, select ",Object(n.b)("strong",{parentName:"li"},"Specific security groups"),".",Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},"Add the security group where your Power BI Service Principal application is added. ( group of which principal is a member of)"))),Object(n.b)("li",{parentName:"ul"},"Under ",Object(n.b)("strong",{parentName:"li"},"Admin API settings"),", toggle on ",Object(n.b)("strong",{parentName:"li"},"Enabled")," for ",Object(n.b)("strong",{parentName:"li"},"Allow service principals to use read-only Power BI admin APIs (Preview)"),".",Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{alt:"Power BI Admin portal Menu",src:Object(c.a)("/doc-images/powerbi/admin-api-settings.png")})),Object(n.b)("p",null,"Power BI Admin portal Menu"))),Object(n.b)("li",{parentName:"ul"},"In the ",Object(n.b)("strong",{parentName:"li"},"Apply to")," section, select ",Object(n.b)("strong",{parentName:"li"},"Specific security groups")," and add the group where the application is a member of.")),Object(n.b)("h2",{id:"step-5-configure-permissions-for-the-application"},"Step 5: Configure Permissions for the Application"),Object(n.b)("p",null,"The application requires some permission-level actions on behalf of the user."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Go to ",Object(n.b)("strong",{parentName:"p"},Object(n.b)("a",{parentName:"strong",href:"https://portal.azure.com"},"Azure portal")," > Azure Active Directory > App registrations"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Click on your application and select ",Object(n.b)("strong",{parentName:"p"},"API permissions"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Click ",Object(n.b)("strong",{parentName:"p"},"Add a permission"),".")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},"Map the permissions for service principal to work in BI Hub."),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{width:"550",alt:"Microsoft Graph API permissions",src:Object(c.a)("/doc-images/powerbi/microsoft-graph.png")})),Object(n.b)("p",null,"Microsoft Graph API permissions")),Object(n.b)("div",{class:"center"},Object(n.b)(o.a,{mdxType:"Zoom"},Object(n.b)("img",{width:"550",alt:"Power BI service API permissions",src:Object(c.a)("/doc-images/powerbi/powerbi-service.png")})),Object(n.b)("p",null,"Power BI service API permissions")))),Object(n.b)("div",{className:"admonition admonition-note alert alert--secondary"},Object(n.b)("div",{parentName:"div",className:"admonition-heading"},Object(n.b)("h5",{parentName:"div"},Object(n.b)("span",{parentName:"h5",className:"admonition-icon"},Object(n.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(n.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),Object(n.b)("div",{parentName:"div",className:"admonition-content"},Object(n.b)("p",{parentName:"div"},"Do not give ",Object(n.b)("inlineCode",{parentName:"p"},"Tenant.Read.All")," and ",Object(n.b)("inlineCode",{parentName:"p"},"Tenant.ReadWrite.All")," permissions under Power BI Service permissions. That will prevent reports from coming into BIHUB."))),Object(n.b)("p",null,"Your Power BI Service Principal can now access Azure AD tenant resources."))}u.isMDXComponent=!0}}]);